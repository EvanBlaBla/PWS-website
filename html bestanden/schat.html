<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Schat</title>
  <link rel="stylesheet" href="css/verteller.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: radial-gradient(circle at center, #5a5a5a, #2f2f2f 80%);
      font-family: 'Trebuchet MS', sans-serif;
      overflow: hidden;
    }

    /* Animatie van bewegende lichtreflecties in de grot */
    .grot-light {
      position: fixed;
      width: 300px;
      height: 300px;
      background: rgba(255,255,255,0.05);
      border-radius: 50%;
      filter: blur(50px);
      animation: float 6s infinite alternate ease-in-out;
      pointer-events: none;
    }

    @keyframes float {
      0% { transform: translate(0px, 0px); }
      100% { transform: translate(40px, -40px); }
    }

    /* Deur styling */
    #deur {
      width: 300px;
      height: 480px;
      margin: 140px auto;
      border-radius: 20px;
      background: linear-gradient(to bottom, #8a5525, #4a2c12);
      border: 8px solid #2b1a09;
      box-shadow: 0 0 35px rgba(0,0,0,0.9);
      position: relative;
      cursor: pointer;
      transition: transform 1.6s ease-in-out;
      transform-origin: left center;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 5;
    }

    /* Deur-knop */
    #deur::after {
      content: "";
      position: absolute;
      right: 25px;
      width: 22px;
      height: 22px;
      background: radial-gradient(circle, #eac27e, #b98028);
      border-radius: 50%;
      box-shadow: 0 0 6px rgba(0,0,0,0.6);
    }

    /* Input onder de deur */
    #code {
      display: none;
      position: absolute;
      bottom: -60px;
      padding: 10px 14px;
      font-size: 18px;
      border: none;
      border-radius: 6px;
      outline: none;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
    }

    /* Overlay schat */
    #schatOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      backdrop-filter: blur(6px);
      background: rgba(0,0,0,0.65);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10;
      animation: fadeIn 0.6s ease;
    }

    @keyframes fadeIn {
      from {opacity: 0;} to {opacity: 1;}
    }

    #schatTekst {
      background: linear-gradient(to bottom right, #fff8d9, #f2d787);
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      width: 350px;
      box-shadow: 0 0 25px rgba(0,0,0,0.6);
      display: none;
      animation: popIn 0.5s ease;
    }

    @keyframes popIn {
      0% {transform: scale(0.6); opacity: 0;} 
      100% {transform: scale(1); opacity: 1;}
    }

    #schatTekst h1 {
      margin-top: 0;
      font-size: 32px;
      color: #8b5a00;
    }

    #sluitSchatKnop {
      margin-top: 15px;
      padding: 10px 18px;
      border: none;
      border-radius: 10px;
      background: #d19b32;
      color: white;
      font-size: 18px;
      cursor: pointer;
      transition: 0.2s;
    }

    #sluitSchatKnop:hover {
      background: #b9862c;
    }

  </style>
</head>
<body>
  <div class="verteller" id="overlay" style="display: flex !important;">
  <div class="verteller-content" id="verteller">
    <div class="persoon" id="persoonImg">
      
    </div>
    <div class="tekst" id="tekst">
      <div id="speech-bubble">
        <span id="tekstInSpeechbubble">Je hebt de schat gevonden! om de deur te kunnen openen, moet je de juiste code invoeren. Als je de antwoorden van alle aanwijzingen achter elkaar zet, kan je de deur openen. <button onclick="document.getElementById('overlay').style.display = 'none';">Sluiten</button></span>
      </div>
    </div>
  </div>
</div>

  <div class="grot-light" style="top: 10%; left: 20%;"></div>
  <div class="grot-light" style="bottom: 15%; right: 25%; animation-duration: 8s;"></div>

  <div id="schatOverlay">
    <div id="schatTekst">
      <h1>Gefeliciteerd!</h1>
      <p>Je hebt de schat gevonden!</p>
      <p>Dankzij de succesvolle samenwerking met piraatx² zijn jullie RIJK!!.</p>
      <p>Tot het volgende avontuur!</p>
      <button id="sluitSchatKnop">Sluit</button>
    </div>
  </div>

  <div id="deur">
    <input id="code" type="text" placeholder="Voer code in...">
  </div>

  <script>
    window.addEventListener('DOMContentLoaded', () => {

      const defaultState = {
    hoedEquipped: "pictures/piraatx2/defaulthoedAI.png",
    ooglapjeEquipped: "pictures/piraatx2/defaultooglapjeAI.png",
    zwaardEquipped: "pictures/piraatx2/defaultzwaardAI.png"
  };

  // Laad uit localStorage of gebruik default
  const savedState = JSON.parse(localStorage.getItem('pirateEquipped')) || defaultState;

  // Plaats de imgs in de persoonImg div (overlays)
  const persoonImg = document.getElementById('persoonImg');
  persoonImg.innerHTML = `
    <img id="hoedEquipped" src="${savedState.hoedEquipped}" style="height: 400px; width: auto; object-fit: contain;">
    <img id="ooglapjeEquipped" src="${savedState.ooglapjeEquipped}" style="height: 400px; width: auto; object-fit: contain;">
    <img id="zwaardEquipped" src="${savedState.zwaardEquipped}" style="height: 400px; width: auto; object-fit: contain;">
    <img id="kledingEquipped" src="pictures/piraatx2/piraatX2bodyAI.png" style="height: 400px; width: auto; object-fit: contain;">
  `;
    const overlay = document.getElementById('schatOverlay');
    const tekst = document.getElementById('schatTekst');
    const sluitKnop = document.getElementById('sluitSchatKnop');
    const deur = document.getElementById('deur');
    const codeInput = document.getElementById('code');

    // Klik op de deur → input zichtbaar
    deur.addEventListener('click', () => {
      codeInput.style.display = 'block';
      codeInput.focus();
    });

    // Code check
    codeInput.addEventListener('input', () => {
      if (codeInput.value === '233kwadratisch') {
        deur.style.transform = 'scale(1.4) rotateY(-90deg)';

        setTimeout(() => {
          document.body.style.backgroundImage = "url('pictures/schatAchtergrond.png')";
          document.body.style.backgroundSize = 'cover';
          document.body.style.backgroundRepeat = 'no-repeat';
          document.body.style.backgroundAttachment = 'fixed';
          document.body.style.backgroundPosition = 'center';
          document.body.style.transition = 'background-image 1s ease, transform 1s ease';

          setTimeout(() => {
            overlay.style.display = 'flex';
            tekst.style.display = 'block';
            deur.style.display = 'none';
            document.getElementById('terugKnop').style.display = 'block';
          }, 2000);

        }, 1200);(() => {
          overlay.style.display = 'flex';
          tekst.style.display = 'block';
          deur.style.display = 'none';
        }, 900);
      }
    });

    // Sluit overlay
    sluitKnop.addEventListener('click', () => {
      overlay.style.display = 'none';
      tekst.style.display = 'none';
    });
    });
  
  </script>

  <a id="terugKnop" href="main-menu.html" style="display:none; position:fixed; top:20px; left:20px; padding:10px 16px; background:#d19b32; color:white; border-radius:8px; font-size:18px; text-decoration:none; z-index:20;">Terug</a>

</body>
</html>
